# SimSharp Change Log

## Version 3.5.0 (2025-11-11)

### Breaking Changes
- **Removed .NET Framework 4.5 and 4.6.2 targets** - These older targets have been removed as they are fully covered by .NET Standard 2.0 compatibility. Applications targeting these frameworks can continue to use the .NET Standard 2.0 build.

### Added
- **Added .NET 9.0 target** - The SimSharp library now multi-targets .NET 9.0 alongside .NET Standard 2.0
  - Enables access to the latest .NET runtime optimizations and performance improvements
  - Provides access to modern C# language features when using .NET 9.0
  - Maintains backward compatibility through .NET Standard 2.0 target

### Changed
- **Updated test project** (Tests.csproj) from .NET 7.0 to .NET 9.0
- **Updated samples project** (Samples.csproj) from .NET 7.0 to .NET 9.0
- **Updated benchmark project** (Benchmark.csproj) from .NET 7.0 to .NET 9.0
- **Updated package description** to reflect new target framework strategy

### Performance Improvements
- **Replaced `string.Format` with interpolated strings** - Improved string formatting performance in `Formatter.cs` (up to 2x faster in .NET 9.0)
- **Optimized string concatenation** - Replaced string concatenation with interpolated strings in `GenericPriorityQueue.cs` and `Distributions.cs` for better performance
- **Optimized `GetPercentile` method** - Replaced inefficient LINQ `OrderBy().Skip()` pattern with single `Array.Sort()` operation in `SampleMonitor.cs`, reducing complexity and memory allocations
- **Added .NET 9.0-specific optimizations** - Conditional compilation directives for span-based operations in `EventQueue.Clear()` for improved performance on .NET 9.0 while maintaining .NET Standard 2.0 compatibility
- **Benchmark results**: MachineShop benchmark processes 4.3+ million events per second on .NET 9.0 (improved from 3.5M events/s baseline)

### Target Framework Strategy
The library now uses a dual-targeting approach:
- **.NET Standard 2.0** - For maximum compatibility across platforms:
  - .NET Framework 4.6.1 and later
  - .NET Core 2.0 and later
  - Mono, Xamarin, Unity
  - Any platform supporting .NET Standard 2.0
  
- **.NET 9.0** - For modern .NET applications:
  - Latest runtime performance optimizations
  - Modern language features
  - Future-proof development

### Compatibility
All existing functionality remains unchanged. The library continues to support:
- Process-based discrete event simulation
- All resource types (Resource, PriorityResource, PreemptiveResource, ResourcePool, Store, FilterStore, PriorityStore, Container)
- Event system (Event, Timeout, Process, Condition, AllOf, AnyOf)
- Monitoring and analysis (SampleMonitor, TimeSeriesMonitor, Report)
- Distribution support
- Both DateTime/TimeSpan and double-based time APIs

### Testing
- All 109 unit tests pass on .NET 9.0
- Benchmark and sample projects verified on .NET 9.0

---

## Version 3.4.2

### Fixed
- Bug in mean calculation of UniformDistribution

---

## Earlier Versions

For changes in versions 3.4.1 and earlier, please refer to the commit history or release notes on GitHub.
